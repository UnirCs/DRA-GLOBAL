<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <title>GSAP · ScrollTrigger avanzado</title>
    <style>
        :root{
            --color-primary:#0055ff;
            --color-accent:#ff7b00;
            --color-bg:#f5f7fa;
        }

        *{box-sizing:border-box}
        body{
            margin:0;
            font-family:system-ui, sans-serif;
            background:var(--color-bg);
        }

        /* Sección “hero” que quedará fijada */
        .hero{
            height:100vh;
            display:grid;
            place-items:center;
            position:relative;
            overflow:hidden;
            background:var(--color-primary);
            color:#fff;
        }

        /* Elementos que se animarán */
        .hero h1{
            font-size:clamp(2.5rem,7vw,5rem);
            margin:0;
        }
        .box{
            width:120px;height:120px;
            background:var(--color-accent);
            border-radius:12px;
            margin-top:2rem;
        }

        /* Resto de la página: sirve solo para crear scroll */
        .content{
            height:200vh;
            background:var(--color-bg);
        }
    </style>
</head>
<body>

<section class="hero">
    <h1 class="title">Desliza hacia abajo</h1>
    <div class="box"></div>
</section>

<div class="content"></div>

<!-- GSAP + ScrollTrigger desde CDN -->
<script src="https://cdn.jsdelivr.net/npm/gsap@3/dist/gsap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/gsap@3/dist/ScrollTrigger.min.js"></script>
<script>
    gsap.registerPlugin(ScrollTrigger);

    /* Timeline principal asociada a ScrollTrigger */
    const tl = gsap.timeline({
        scrollTrigger:{
            trigger: '.hero',     // sección observada
            start:   'top top',   // cuando su borde superior toca el top del viewport
            end:     '+=150%',    // desplazamiento extra antes de liberar el pin
            pin:     true,        // fija la sección
            scrub:   1            // acopla la velocidad de la animación al scroll
        }
    });

    /* Secuencia de pasos */
    tl.from('.title',{ y:80, opacity:0 })                       // ① título aparece
        .to('.box',{ scale:4, rotation:270, duration:1.2,
            ease:'expo.inOut' })                         // ② caja crece y gira
        .to('.hero',{ backgroundColor:'var(--color-accent)',
            duration:0.6 }, '<')                         // ③ fondo cambia (en paralelo)
        .to('.title',{ y:-120, opacity:0 });                       // ④ título sale
</script>
</body>
</html>
